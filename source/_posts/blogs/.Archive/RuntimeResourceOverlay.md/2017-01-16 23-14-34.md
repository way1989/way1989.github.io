---
date: 2017-01-16 23:02:24
title: Android运行时资源覆盖
description: Android Runtime Resource Overlay
categories:   # 这里写的分类会自动汇集到 categories 页面上，分类可以多级
 - 博客
tags: # 这里写的标签会自动汇集到 tags 页面上
 - 博客
---

## 什么是运行时资源覆盖

无需修改原app的代码，无需重新编译，就能覆盖app内的部分资源，从而实现修改app的部分UI,后面简称RRO。

## RRO原理

* 应用通过 getString/getDrawable去调用某个资源时,会将这个resources ID 作为参数传给 framework 层。同一名称但不同状态的 resources ID 是一样的,比如不同分辨率但名称相同的图片分别被放置在了drawable-hdpi/drawable-ldpi/drawable-mdpi下，但在编译时针对该图片生成的resources ID只有一个。

* 为了快速查找到指定的资源，Apk编译的时候会把Java文件里面的R.String.app_name替换成ox7f123456这种格式的值

* 每个apk里面都有一个文件(resources.arsc)记录着指定的resource_id对应的资源类型，如果是string类型，则记录的这个资源名称对应的所有语言的翻译，如果是drawable类型，则记录着哪些分辨率底下有这个资源。

## Resources.arsc的结构 string

![](./_image/2017-01-16-23-12-24.jpg)

![](./_image/2017-01-16-23-12-40.jpg)

## Resources.arsc的结构 drawable

![](./_image/2017-01-16-23-13-30.jpg)

## RRO实现方法








* 去官网下载并安装：[Beyond Compare](http://www.scootersoftware.com/download.php)
* 下载一个文件：[trial.key](http://o83jxl7u1.bkt.clouddn.com/trial.key)
* 在finder 右击beyond文件>显示包内容>Contents>Recourse 替换 trial.key
* 重启软件即可。

## Adobe Photoshop激活方法：

* 下载一个文件后解压：[amtlib.framework](http://o83jxl7u1.bkt.clouddn.com/amtlib.framework.zip)
* 安装完成后运行软件，选择“试用“，要断网，点击“稍后连接“，然后退出。
* 将破解包解压后，右键程序图标-->显示包内容-->contents-->frameworks，用解压来的文件替换amtlib.framework。
* 重启软件，应该就没有倒计时了吧？

## 未完待续...
